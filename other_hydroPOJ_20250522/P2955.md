<h2>Description</h2><span lang="en-us"><p>We give the following inductive definition of a ¡°regular brackets¡± sequence:</p><ul><li>the empty sequence is a regular brackets sequence,</li><li>if <i>s</i> is a regular brackets sequence, then (<i>s</i>) and [<i>s</i>] are regular brackets sequences, and</li><li>if <i>a</i> and <i>b</i> are regular brackets sequences, then <i>ab</i> is a regular brackets sequence.</li><li>no other sequence is a regular brackets sequence</li></ul><p>For instance, all of the following character sequences are regular brackets sequences:</p><blockquote><p><code>(), [], (()), ()[], ()[()]</code></p></blockquote><p>while the following character sequences are not:</p><blockquote><p><code>(, ], )(, ([)], ([(]</code></p></blockquote><p>Given a brackets sequence of characters <i>a</i><sub>1</sub><i>a</i><sub>2</sub> ¡­ <i>a<sub>n</sub></i>, your goal is to find the length of the longest regular brackets sequence that is a subsequence of <i>s</i>. That is, you wish to find the largest <i>m</i> such that for indices <i>i</i><sub>1</sub>, <i>i</i><sub>2</sub>, ¡­, <i>i<sub>m</sub></i> where 1 ¡Ü <i>i</i><sub>1</sub> &lt; <i>i</i><sub>2</sub> &lt; ¡­ &lt; <i>i<sub>m</sub></i> ¡Ü <i>n</i>, <i>a<sub>i</sub></i><span style="vertical-align: sub"><font size="1">1</font></span><i>a<sub>i</sub></i><span style="vertical-align: sub"><font size="1">2</font></span> ¡­ <i>a<sub>i</sub><span style="vertical-align: sub"><font size="1">m</font></span></i> is a regular brackets sequence.</p><p>Given the initial sequence <code>([([]])]</code>, the longest regular brackets subsequence is <code>[([])]</code>.</p></span><h2>Input</h2><span lang="en-us"><p>The input test file will contain multiple test cases. Each input test case consists of a single line containing only the characters <code>(</code>, <code>)</code>, <code>[</code>, and <code>]</code>; each input test will have length between 1 and 100, inclusive. The end-of-file is marked by a line containing the word ¡°end¡± and should not be processed.</p></span><h2>Output</h2><p>For each input case, the program should print the length of the longest possible regular brackets subsequence on a single line.</p><pre><code class="language-input1">((()))
()()()
([]])
)[)(
([][][)
end</code></pre><pre><code class="language-output1">6
6
4
0
6</code></pre><h2>Source</h2><a href="searchproblem?field=source&amp;key=Stanford+Local+2004">Stanford Local 2004</a>