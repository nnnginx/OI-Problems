# P3011 [USACO11JAN] Traffic Lights S

## 题目描述

和FJ靠的最近的城市Kenosha市有 $M$条道路。(编号为$1-M$) 连接着$N$个路口 (编号为$1-N$) 。保证没有重边和自环。 

从点$i$到点$j$需要的时间是$T_{ij}$， 且保证$T_{ij}$ = $T_{ji}$

每个路口有一个交通灯，有两种颜色：蓝色和紫色。两个颜色周期性的交替。蓝色持续一定时间，然后紫色持续一定时间。
想要从$i$到$j$只有在$i$和$j$的信号灯颜色相同的时候才可以走(从T1离开i走向j，只需T1时刻i与j的颜色相同即可，无其他任何约束。)

如果在变幻灯的那一秒到$j$，考虑的是变幻后的颜色。
给你所有第$i$个路口的蓝色灯持续时间$DB_i$和紫色灯持续时间$DP_i$
和每个路口刚开始灯的颜色$C_i$,剩余持续时间$R_i$
求一个给定的原点$S$到给定目标点$D$的最小时间。

## 输入格式

* 第一行两个整数 S和D
 * 第二行两个整数 N和M
 * 第三至N+2行。第i+2行描述点i的信号灯情况 $C_i$,   $R_i$,  $DB_i$,   $DP_i$
 * 第三道N+M+2行：第N+2+k行描述第k条道路 : $i$, $j$, $T_{ij}$

## 输出格式

* 一个整数代表从S到D最少消耗的时间， 如果S、D不连通，输出0

感谢@ToBiChi 提供翻译

## 输入输出样例 #1

### 输入 #1

```
1 4 
4 5 
B 2 16 99 
P 6 32 13 
P 2 87 4 
P 38 96 49 
1 2 4 
1 3 40 
2 3 75 
2 4 76 
3 4 77
```

### 输出 #1

```
127
```