# 线段树模板

## 背景

在 $2023$ 年，出题人想到了一道模拟题，便将题意写了下来，然而没有时间写标程。

在 $2024$ 年 $4$ 月 $17$ 日，出题人想起了这道题，便决定将它出出来。

## 题面

你有 $2^{64}$ 个长度为 $2^{64}$ 的数组，数组的编号范围为 $[0,2^{64})$ ，每个数组的下标范围为 $[0,2^{64})$ 。

你需要支持以下操作：

1. 区间加。给出 $4$ 个整数 $x,l,r,v$ ，代表将第 $x$ 个数组中下标处在 $[l,r]$ 区间内的所有元素加上 $v$ 。
2. 区间求和。给出 $3$ 个整数 $x,l,r$ ，代表求第 $x$ 个数组中下标处在 $[l,r]$ 区间内的所有元素的总和。
3. 区间裁剪。给出 $4$ 个整数 $x,y,l,r$ ，代表将第 $x$ 和 $y$ 个数组中下标处在 $[l,r]$ 区间内的所有元素对应交换。
4. 数组清零。给出 $1$ 个整数 $x$ ，代表将第 $x$ 个数组中的所有元素清零。

## 输入格式

第一行一个整数 $n$ ，表示操作次数。

接下来 $n$ 行，每行的第一个整数 $o$ 为操作编号，接下来的整数遵循题面中的格式按顺序给出。

## 输出格式

对于每一个操作 $2$ ，输出一行一个整数，表示查询结果对 $2^{64}$ 取模后的结果。

## 样例

```input1
5
1 0 1 4 5
3 0 1 1 4
2 1 1 4
4 1
2 1 1 4
```

```output1
20
0
```

## 数据范围

对于所有的数据，保证 $n=10^5,o\in[1,4]$ ，其余所有整数均在 $[0,2^{64})$ 范围内。

本题将会以多个方面评判给出代码的性能。

具体来说，本题将会分 Subtask 。

详情如下。

|Subtask 编号|评测依赖|分数|特殊性质|
|---|---|---|---|
|Single Prerequisite #0|无|$10$|仅对一个数组进行操作|
|Massive Update #1|#0|$15$|操作 $1$ 占所有操作的 $50\%$ 以上|
|Busy Query #2|#0|$15$|操作 $2$ 占所有操作的 $50\%$ 以上|
|Malicious Switch #3|#0|$15$|操作 $3$ 占所有操作的 $50\%$ 以上|
|Destructive Clear #4|#0|$15$|操作 $4$ 占所有操作的 $50\%$ 以上|
|Stellar #5|#0,#1,#2,#3,#4|$30$|数据随机生成|

